/*! For license information please see bundle.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PKCE=t():e.PKCE=t()}(self,(function(){return(()=>{"use strict";var e={607:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function u(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.verify=t.createPKCE=t.createPKCEChallengeFromVerifier=t.createHashSha256=t.base64Encode=t.base64url=t.decToHex=t.createBuffer=t.generateRandomString=void 0;const a=o(r(460));function i(){const e=new Uint16Array(28);return a.default.getRandomValues(e),Array.from(e,c).join("")}function u(e){return(new TextEncoder).encode(e)}function c(e){return`0${e.toString(16)}`.substr(-2)}function s(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function l(e){return function(e,t="base64"){const r=btoa(e);return"base64url"===t?s(r):r}(String.fromCharCode.apply(null,new Uint8Array(e)),"base64url")}function p(e){return n(this,void 0,void 0,(function*(){return a.default.subtle.digest({name:"SHA-256"},u(e))}))}function f(e){return n(this,void 0,void 0,(function*(){return p(e).then((e=>l(e)))}))}t.generateRandomString=i,t.createBuffer=u,t.decToHex=c,t.base64url=s,t.base64Encode=l,t.createHashSha256=p,t.createPKCEChallengeFromVerifier=f,t.createPKCE=function(){return n(this,void 0,void 0,(function*(){const e=i();return{verifier:e,code_challenge:yield f(e),method:"SHA256"}}))},t.verify=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield f(t);return e===r}))}},460:(e,t,r)=>{var n,o;r.r(t),r.d(t,{default:()=>a}),n="undefined"!=typeof self?self:void 0,o=function(e){if("function"!=typeof Promise)throw"Promise support required";var t=e.crypto||e.msCrypto;if(t){var r=t.subtle||t.webkitSubtle;if(r){var n=e.Crypto||t.constructor||Object,o=e.SubtleCrypto||r.constructor||Object,a=(e.CryptoKey||e.Key,e.navigator.userAgent.indexOf("Edge/")>-1),i=!!e.msCrypto&&!a,u=!t.subtle&&!!t.webkitSubtle;if(i||u){var c={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},s={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach((function(e){var n=r[e];r[e]=function(o,a,c){var s,l,p,h,w=[].slice.call(arguments);switch(e){case"generateKey":s=g(o),l=a,p=c;break;case"importKey":s=g(c),l=w[3],p=w[4],"jwk"===o&&((a=b(a)).alg||(a.alg=d(s)),a.key_ops||(a.key_ops="oct"!==a.kty?"d"in a?p.filter(E):p.filter(k):p.slice()),w[1]=m(a));break;case"unwrapKey":s=w[4],l=w[5],p=w[6],w[2]=c._key}if("generateKey"===e&&"HMAC"===s.name&&s.hash)return s.length=s.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[s.hash.name],r.importKey("raw",t.getRandomValues(new Uint8Array(s.length+7>>3)),s,l,p);if(u&&"generateKey"===e&&"RSASSA-PKCS1-v1_5"===s.name&&(!s.modulusLength||s.modulusLength>=2048))return(o=g(o)).name="RSAES-PKCS1-v1_5",delete o.hash,r.generateKey(o,!0,["encrypt","decrypt"]).then((function(e){return Promise.all([r.exportKey("jwk",e.publicKey),r.exportKey("jwk",e.privateKey)])})).then((function(e){return e[0].alg=e[1].alg=d(s),e[0].key_ops=p.filter(k),e[1].key_ops=p.filter(E),Promise.all([r.importKey("jwk",e[0],s,!0,e[0].key_ops),r.importKey("jwk",e[1],s,l,e[1].key_ops)])})).then((function(e){return{publicKey:e[0],privateKey:e[1]}}));if((u||i&&"SHA-1"===(s.hash||{}).name)&&"importKey"===e&&"jwk"===o&&"HMAC"===s.name&&"oct"===a.kty)return r.importKey("raw",y(f(a.k)),c,w[3],w[4]);if(u&&"importKey"===e&&("spki"===o||"pkcs8"===o))return r.importKey("jwk",A(a),c,w[3],w[4]);if(i&&"unwrapKey"===e)return r.decrypt(w[3],c,a).then((function(e){return r.importKey(o,e,w[4],w[5],w[6])}));try{h=n.apply(r,w)}catch(e){return Promise.reject(e)}return i&&(h=new Promise((function(e,t){h.onabort=h.onerror=function(e){t(e)},h.oncomplete=function(t){e(t.target.result)}}))),h=h.then((function(e){return"HMAC"===s.name&&(s.length||(s.length=8*e.algorithm.length)),0==s.name.search("RSA")&&(s.modulusLength||(s.modulusLength=(e.publicKey||e).algorithm.modulusLength),s.publicExponent||(s.publicExponent=(e.publicKey||e).algorithm.publicExponent)),e.publicKey&&e.privateKey?{publicKey:new K(e.publicKey,s,l,p.filter(k)),privateKey:new K(e.privateKey,s,l,p.filter(E))}:new K(e,s,l,p)}))}})),["exportKey","wrapKey"].forEach((function(e){var t=r[e];r[e]=function(n,o,a){var c,s=[].slice.call(arguments);switch(e){case"exportKey":s[1]=o._key;break;case"wrapKey":s[1]=o._key,s[2]=a._key}if((u||i&&"SHA-1"===(o.algorithm.hash||{}).name)&&"exportKey"===e&&"jwk"===n&&"HMAC"===o.algorithm.name&&(s[0]="raw"),!u||"exportKey"!==e||"spki"!==n&&"pkcs8"!==n||(s[0]="jwk"),i&&"wrapKey"===e)return r.exportKey(n,o).then((function(e){return"jwk"===n&&(e=y(unescape(encodeURIComponent(JSON.stringify(b(e)))))),r.encrypt(s[3],a,e)}));try{c=t.apply(r,s)}catch(e){return Promise.reject(e)}return i&&(c=new Promise((function(e,t){c.onabort=c.onerror=function(e){t(e)},c.oncomplete=function(t){e(t.target.result)}}))),"exportKey"===e&&"jwk"===n&&(c=c.then((function(e){return(u||i&&"SHA-1"===(o.algorithm.hash||{}).name)&&"HMAC"===o.algorithm.name?{kty:"oct",alg:d(o.algorithm),key_ops:o.usages.slice(),ext:!0,k:p(h(e))}:((e=b(e)).alg||(e.alg=d(o.algorithm)),e.key_ops||(e.key_ops="public"===o.type?o.usages.filter(k):"private"===o.type?o.usages.filter(E):o.usages.slice()),e)}))),!u||"exportKey"!==e||"spki"!==n&&"pkcs8"!==n||(c=c.then((function(e){return w(b(e))}))),c}})),["encrypt","decrypt","sign","verify"].forEach((function(e){var t=r[e];r[e]=function(n,o,a,u){if(i&&(!a.byteLength||u&&!u.byteLength))throw new Error("Empy input is not allowed");var c,s=[].slice.call(arguments),l=g(n);if(i&&"decrypt"===e&&"AES-GCM"===l.name){var p=n.tagLength>>3;s[2]=(a.buffer||a).slice(0,a.byteLength-p),n.tag=(a.buffer||a).slice(a.byteLength-p)}s[1]=o._key;try{c=t.apply(r,s)}catch(e){return Promise.reject(e)}return i&&(c=new Promise((function(t,r){c.onabort=c.onerror=function(e){r(e)},c.oncomplete=function(r){if(r=r.target.result,"encrypt"===e&&r instanceof AesGcmEncryptResult){var n=r.ciphertext,o=r.tag;(r=new Uint8Array(n.byteLength+o.byteLength)).set(new Uint8Array(n),0),r.set(new Uint8Array(o),n.byteLength),r=r.buffer}t(r)}}))),c}})),i){var l=r.digest;r.digest=function(e,t){if(!t.byteLength)throw new Error("Empy input is not allowed");var n;try{n=l.call(r,e,t)}catch(e){return Promise.reject(e)}return n=new Promise((function(e,t){n.onabort=n.onerror=function(e){t(e)},n.oncomplete=function(t){e(t.target.result)}}))},e.crypto=Object.create(t,{getRandomValues:{value:function(e){return t.getRandomValues(e)}},subtle:{value:r}}),e.CryptoKey=K}u&&(t.subtle=r,e.Crypto=n,e.SubtleCrypto=o,e.CryptoKey=K)}}}function p(e){return btoa(e).replace(/\=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function f(e){return e=(e+="===").slice(0,-e.length%4),atob(e.replace(/-/g,"+").replace(/_/g,"/"))}function y(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function h(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),String.fromCharCode.apply(String,e)}function g(e){var t={name:(e.name||e||"").toUpperCase().replace("V","v")};switch(t.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":e.length&&(t.length=e.length);break;case"HMAC":e.hash&&(t.hash=g(e.hash)),e.length&&(t.length=e.length);break;case"RSAES-PKCS1-v1_5":e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":e.hash&&(t.hash=g(e.hash)),e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return t}function d(e){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[e.name][(e.hash||{}).name||e.length||""]}function b(e){(e instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=JSON.parse(decodeURIComponent(escape(h(e)))));var t={kty:e.kty,alg:e.alg,ext:e.ext||e.extractable};switch(t.kty){case"oct":t.k=e.k;case"RSA":["n","e","d","p","q","dp","dq","qi","oth"].forEach((function(r){r in e&&(t[r]=e[r])}));break;default:throw new TypeError("Unsupported key type")}return t}function m(e){var t=b(e);return i&&(t.extractable=t.ext,delete t.ext),y(unescape(encodeURIComponent(JSON.stringify(t)))).buffer}function A(e){var t=v(e),r=!1;t.length>2&&(r=!0,t.shift());var n={ext:!0};switch(t[0][0]){case"1.2.840.113549.1.1.1":var o=["n","e","d","p","q","dp","dq","qi"],a=v(t[1]);r&&a.shift();for(var i=0;i<a.length;i++)a[i][0]||(a[i]=a[i].subarray(1)),n[o[i]]=p(h(a[i]));n.kty="RSA";break;default:throw new TypeError("Unsupported key type")}return n}function w(e){var t,r=[["",null]],n=!1;switch(e.kty){case"RSA":for(var o=["n","e","d","p","q","dp","dq","qi"],a=[],i=0;i<o.length&&o[i]in e;i++){var u=a[i]=y(f(e[o[i]]));128&u[0]&&(a[i]=new Uint8Array(u.length+1),a[i].set(u,1))}a.length>2&&(n=!0,a.unshift(new Uint8Array([0]))),r[0][0]="1.2.840.113549.1.1.1",t=a;break;default:throw new TypeError("Unsupported key type")}return r.push(new Uint8Array(S(t)).buffer),n?r.unshift(new Uint8Array([0])):r[1]={tag:3,value:r[1]},new Uint8Array(S(r)).buffer}function v(e,t){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t||(t={pos:0,end:e.length}),t.end-t.pos<2||t.end>e.length)throw new RangeError("Malformed DER");var r,n=e[t.pos++],o=e[t.pos++];if(o>=128){if(o&=127,t.end-t.pos<o)throw new RangeError("Malformed DER");for(var a=0;o--;)a<<=8,a|=e[t.pos++];o=a}if(t.end-t.pos<o)throw new RangeError("Malformed DER");switch(n){case 2:r=e.subarray(t.pos,t.pos+=o);break;case 3:if(e[t.pos++])throw new Error("Unsupported bit string");o--;case 4:r=new Uint8Array(e.subarray(t.pos,t.pos+=o)).buffer;break;case 5:r=null;break;case 6:var i=btoa(h(e.subarray(t.pos,t.pos+=o)));if(!(i in c))throw new Error("Unsupported OBJECT ID "+i);r=c[i];break;case 48:r=[];for(var u=t.pos+o;t.pos<u;)r.push(v(e,t));break;default:throw new Error("Unsupported DER tag 0x"+n.toString(16))}return r}function S(e,t){t||(t=[]);var r=0,n=0,o=t.length+2;if(t.push(0,0),e instanceof Uint8Array){r=2,n=e.length;for(var a=0;a<n;a++)t.push(e[a])}else if(e instanceof ArrayBuffer)for(r=4,n=e.byteLength,e=new Uint8Array(e),a=0;a<n;a++)t.push(e[a]);else if(null===e)r=5,n=0;else if("string"==typeof e&&e in s){var i=y(atob(s[e]));for(r=6,n=i.length,a=0;a<n;a++)t.push(i[a])}else if(e instanceof Array){for(a=0;a<e.length;a++)S(e[a],t);r=48,n=t.length-o}else{if(!("object"==typeof e&&3===e.tag&&e.value instanceof ArrayBuffer))throw new Error("Unsupported DER value "+e);for(r=3,n=(e=new Uint8Array(e.value)).byteLength,t.push(0),a=0;a<n;a++)t.push(e[a]);n++}if(n>=128){var u=n;for(n=4,t.splice(o,0,u>>24&255,u>>16&255,u>>8&255,255&u);n>1&&!(u>>24);)u<<=8,n--;n<4&&t.splice(o,4-n),n|=128}return t.splice(o-2,2,r,n),t}function K(e,t,r,n){Object.defineProperties(this,{_key:{value:e},type:{value:e.type,enumerable:!0},extractable:{value:void 0===r?e.extractable:r,enumerable:!0},algorithm:{value:void 0===t?e.algorithm:t,enumerable:!0},usages:{value:void 0===n?e.usages:n,enumerable:!0}})}function k(e){return"verify"===e||"encrypt"===e||"wrapKey"===e}function E(e){return"sign"===e||"decrypt"===e||"unwrapKey"===e}},"function"==typeof define&&define.amd?define([],(function(){return o(n)})):"object"==typeof module&&module.exports?module.exports=o(n):o(n);const a=window.crypto}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}return r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(607)})()}));